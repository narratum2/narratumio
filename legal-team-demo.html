<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal Team Agent Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }
        
        .demo-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
        }
        
        .demo-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        
        .demo-section h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        
        .demo-button {
            padding: 10px 16px;
            border: none;
            border-radius: 5px;
            background: #3498db;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }
        
        .demo-button:hover {
            background: #2980b9;
        }
        
        .demo-button.secondary {
            background: #95a5a6;
        }
        
        .demo-button.secondary:hover {
            background: #7f8c8d;
        }
        
        .demo-button.success {
            background: #27ae60;
        }
        
        .demo-button.success:hover {
            background: #229954;
        }
        
        .demo-output {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }
        
        .status-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            color: white;
            margin-left: 10px;
        }
        
        .status-indicator.loading {
            background: #f39c12;
        }
        
        .status-indicator.ready {
            background: #27ae60;
        }
        
        .status-indicator.error {
            background: #e74c3c;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature-card {
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
        }
        
        .feature-card h4 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .kbd {
            background: #f4f4f4;
            border: 1px solid #ccc;
            border-radius: 3px;
            box-shadow: 0 1px 0 rgba(0,0,0,0.2);
            display: inline-block;
            font-family: monospace;
            font-size: 11px;
            line-height: 1.4;
            margin: 0 2px;
            padding: 2px 4px;
            white-space: nowrap;
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <h1>üèõÔ∏è Legal Team Agent Demo</h1>
        <p>Comprehensive Legal Content Management System</p>
        <div>
            Status: <span id="system-status" class="status-indicator loading">Loading...</span>
        </div>
    </div>

    <div class="demo-section">
        <h3>üöÄ Quick Start</h3>
        <p>Get started with the Legal Team Agent in seconds:</p>
        <div class="button-group">
            <button class="demo-button success" onclick="showAdminInterface()">
                Open Admin Interface
            </button>
            <button class="demo-button" onclick="generateSampleDocument()">
                Generate Sample Privacy Policy
            </button>
            <button class="demo-button secondary" onclick="showSystemStatus()">
                Show System Status
            </button>
        </div>
        <p><strong>Keyboard Shortcut:</strong> <span class="kbd">Ctrl</span> + <span class="kbd">Shift</span> + <span class="kbd">L</span> to toggle admin interface</p>
    </div>

    <div class="demo-section">
        <h3>üìã Document Management</h3>
        <p>Create and manage legal documents with ease:</p>
        <div class="button-group">
            <button class="demo-button" onclick="createPrivacyPolicy()">Create Privacy Policy</button>
            <button class="demo-button" onclick="createTermsOfService()">Create Terms of Service</button>
            <button class="demo-button" onclick="createCookiePolicy()">Create Cookie Policy</button>
            <button class="demo-button" onclick="listAllDocuments()">List All Documents</button>
        </div>
        <div id="document-output" class="demo-output" style="display: none;"></div>
    </div>

    <div class="demo-section">
        <h3>‚úÖ Compliance Checking</h3>
        <p>Ensure your documents meet regulatory requirements:</p>
        <div class="button-group">
            <button class="demo-button" onclick="runGDPRCheck()">GDPR Compliance Check</button>
            <button class="demo-button" onclick="runCCPACheck()">CCPA Compliance Check</button>
            <button class="demo-button" onclick="runFullCompliance()">Full Compliance Report</button>
        </div>
        <div id="compliance-output" class="demo-output" style="display: none;"></div>
    </div>

    <div class="demo-section">
        <h3>üíæ Backup & Export</h3>
        <p>Backup and export your legal documents:</p>
        <div class="button-group">
            <button class="demo-button" onclick="createBackup()">Create Backup</button>
            <button class="demo-button" onclick="exportDocuments()">Export All Documents</button>
            <button class="demo-button secondary" onclick="showAnalytics()">View Analytics</button>
        </div>
        <div id="backup-output" class="demo-output" style="display: none;"></div>
    </div>

    <div class="feature-grid">
        <div class="feature-card">
            <h4>üõ†Ô∏è Template System</h4>
            <p>Pre-built templates for common legal documents with customizable options and compliance standards.</p>
        </div>
        
        <div class="feature-card">
            <h4>üìä Compliance Dashboard</h4>
            <p>Real-time compliance checking against GDPR, CCPA, and ePrivacy regulations with actionable recommendations.</p>
        </div>
        
        <div class="feature-card">
            <h4>üîÑ Version Control</h4>
            <p>Complete change tracking with version history, review workflows, and rollback capabilities.</p>
        </div>
        
        <div class="feature-card">
            <h4>üîó Seamless Integration</h4>
            <p>Drop-in replacement for existing legal content with automatic migration and backward compatibility.</p>
        </div>
    </div>

    <div class="demo-section">
        <h3>üí° Pro Tips</h3>
        <ul>
            <li><strong>Console Access:</strong> Use <code>legalAdmin</code> object in browser console for advanced operations</li>
            <li><strong>Emergency Restore:</strong> Call <code>emergencyRestoreLegal()</code> if something goes wrong</li>
            <li><strong>Custom Templates:</strong> Add your own document templates via the API</li>
            <li><strong>Analytics:</strong> Track legal content access patterns and user interactions</li>
        </ul>
    </div>

    <!-- Include the Legal Team Agent files -->
    <script src="legal-content.js"></script>
    <script src="legal-team-agent.js"></script>
    <script src="legal-team-interface.js"></script>
    <script src="legal-integration.js"></script>

    <script>
        // Demo functionality
        let demoAgent = null;
        
        // Wait for system initialization
        function waitForSystem() {
            if (typeof LegalTeamAgent !== 'undefined' && window.legalAdmin) {
                demoAgent = window.legalAdmin.agent;
                document.getElementById('system-status').textContent = 'Ready';
                document.getElementById('system-status').className = 'status-indicator ready';
            } else {
                setTimeout(waitForSystem, 100);
            }
        }

        // Start checking for system readiness
        waitForSystem();

        // Demo functions
        function showAdminInterface() {
            if (window.legalAdmin) {
                window.legalAdmin.show();
            } else {
                alert('Legal Team Agent not ready yet. Please wait a moment and try again.');
            }
        }

        function showSystemStatus() {
            if (window.legalAdmin) {
                const status = window.legalAdmin.status();
                showOutput('document-output', JSON.stringify(status, null, 2));
            }
        }

        function generateSampleDocument() {
            if (!demoAgent) {
                alert('System not ready yet. Please wait and try again.');
                return;
            }

            const companyInfo = {
                company_name: "Demo Company LLC",
                website_url: "demo.example.com",
                contact_email: "legal@demo.example.com",
                address: "123 Demo Street\nDemo City, DC 12345"
            };

            const options = {
                collectsLocation: true,
                marketing: true,
                googleAnalytics: true
            };

            try {
                const document = demoAgent.generateDocument('privacy_policy', companyInfo, options);
                showOutput('document-output', `Generated Privacy Policy:\n\nDocument ID: ${document.id}\nType: ${document.type}\nVersion: ${document.version}\nStatus: ${document.status}\n\nContent preview:\n${document.content.substring(0, 500)}...`);
            } catch (error) {
                showOutput('document-output', `Error: ${error.message}`);
            }
        }

        function createPrivacyPolicy() {
            generateDocumentOfType('privacy_policy', 'Privacy Policy');
        }

        function createTermsOfService() {
            generateDocumentOfType('terms_of_service', 'Terms of Service');
        }

        function createCookiePolicy() {
            generateDocumentOfType('cookie_policy', 'Cookie Policy');
        }

        function generateDocumentOfType(type, name) {
            if (!demoAgent) {
                alert('System not ready yet. Please wait and try again.');
                return;
            }

            const companyInfo = {
                company_name: "Demo Company LLC",
                website_url: "demo.example.com",
                contact_email: "legal@demo.example.com",
                jurisdiction: "New York",
                address: "123 Demo Street\nDemo City, DC 12345"
            };

            try {
                const document = demoAgent.generateDocument(type, companyInfo);
                showOutput('document-output', `${name} Created!\n\nDocument ID: ${document.id}\nType: ${document.type}\nVersion: ${document.version}\nCreated: ${document.createdDate}`);
            } catch (error) {
                showOutput('document-output', `Error creating ${name}: ${error.message}`);
            }
        }

        function listAllDocuments() {
            if (!demoAgent) {
                alert('System not ready yet. Please wait and try again.');
                return;
            }

            const documents = demoAgent.listDocuments();
            const output = documents.length > 0 
                ? documents.map(doc => `${doc.type} (v${doc.version}) - ${doc.status} - Updated: ${new Date(doc.lastUpdated).toLocaleDateString()}`).join('\n')
                : 'No documents found. Create some documents first!';
            
            showOutput('document-output', `All Documents (${documents.length}):\n\n${output}`);
        }

        function runGDPRCheck() {
            runComplianceCheck(['GDPR'], 'GDPR Compliance Check');
        }

        function runCCPACheck() {
            runComplianceCheck(['CCPA'], 'CCPA Compliance Check');
        }

        function runFullCompliance() {
            runComplianceCheck(['GDPR', 'CCPA', 'ePrivacy'], 'Full Compliance Report');
        }

        function runComplianceCheck(standards, title) {
            if (!demoAgent) {
                alert('System not ready yet. Please wait and try again.');
                return;
            }

            const documents = demoAgent.listDocuments();
            if (documents.length === 0) {
                showOutput('compliance-output', 'No documents to check. Create some documents first!');
                return;
            }

            let output = `${title}\n${'='.repeat(title.length)}\n\n`;

            documents.forEach(doc => {
                const results = demoAgent.checkCompliance(doc.id || doc.type, standards);
                output += `Document: ${doc.type}\n`;
                output += `Overall Score: ${results.overallScore}%\n`;
                
                results.results.forEach(result => {
                    output += `  ${result.standard}: ${result.passedChecks}/${result.totalChecks} checks passed\n`;
                    if (result.failedChecks.length > 0) {
                        output += `    Failed: ${result.failedChecks.join(', ')}\n`;
                    }
                });

                if (results.recommendations.length > 0) {
                    output += `  Recommendations:\n`;
                    results.recommendations.forEach(rec => {
                        output += `    - ${rec}\n`;
                    });
                }
                output += '\n';
            });

            showOutput('compliance-output', output);
        }

        function createBackup() {
            if (window.legalAdmin) {
                const backup = window.legalAdmin.backup();
                showOutput('backup-output', `Backup Created!\n\nTimestamp: ${backup.timestamp}\nDocuments: ${backup.documents.length}\nChange History: ${backup.changeHistory.length} entries\n\nBackup file downloaded automatically.`);
            }
        }

        function exportDocuments() {
            if (window.legalAdmin) {
                const exported = window.legalAdmin.export();
                const documentTypes = Object.keys(exported);
                showOutput('backup-output', `Documents Exported!\n\nExported Types: ${documentTypes.join(', ')}\nTotal Documents: ${documentTypes.length}\n\nExport file downloaded automatically.`);
            }
        }

        function showAnalytics() {
            if (window.legalIntegration) {
                const analytics = window.legalIntegration.getAnalytics();
                showOutput('backup-output', `Analytics Data:\n\n${JSON.stringify(analytics, null, 2)}`);
            }
        }

        function showOutput(elementId, content) {
            const element = document.getElementById(elementId);
            element.textContent = content;
            element.style.display = 'block';
            element.scrollTop = 0;
        }

        // Add some demo data after initialization
        setTimeout(() => {
            if (demoAgent && demoAgent.listDocuments().length === 0) {
                // Auto-generate some demo documents
                const companyInfo = {
                    company_name: "Narratum LLC",
                    website_url: "narratum.io",
                    contact_email: "legal@narratum.io",
                    jurisdiction: "New York",
                    address: "110 East 25th Street\nNew York, NY 10010"
                };

                try {
                    demoAgent.generateDocument('privacy_policy', companyInfo, { 
                        googleAnalytics: true, 
                        marketing: false 
                    });
                    
                    demoAgent.generateDocument('terms_of_service', companyInfo, { 
                        businessUse: true 
                    });
                    
                    console.log('Demo documents generated automatically');
                } catch (error) {
                    console.log('Could not generate demo documents:', error.message);
                }
            }
        }, 2000);
    </script>
</body>
</html>
